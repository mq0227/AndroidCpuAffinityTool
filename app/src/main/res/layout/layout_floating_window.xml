<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rootLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <!-- 最小化视图 -->
    <LinearLayout
        android:id="@+id/layoutMinimized"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:background="@drawable/floating_bg"
        android:paddingHorizontal="6dp"
        android:paddingVertical="1dp"
        android:visibility="gone">

        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini0" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore0" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="556" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <View android:layout_width="2dp" android:layout_height="1dp"/>
        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini1" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore1" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="556" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <View android:layout_width="2dp" android:layout_height="1dp"/>
        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini2" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore2" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="556" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <View android:layout_width="5dp" android:layout_height="1dp"/>
        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini3" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore3" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="1286" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <View android:layout_width="2dp" android:layout_height="1dp"/>
        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini4" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore4" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="1286" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <View android:layout_width="2dp" android:layout_height="1dp"/>
        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini5" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore5" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="1286" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <View android:layout_width="2dp" android:layout_height="1dp"/>
        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini6" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore6" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="1286" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <View android:layout_width="5dp" android:layout_height="1dp"/>
        <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:gravity="center_horizontal">
            <FrameLayout android:layout_width="11dp" android:layout_height="14dp" android:background="#15FFFFFF">
                <View android:id="@+id/barMini7" android:layout_width="match_parent" android:layout_height="3dp" android:layout_gravity="bottom" android:background="#4CAF50"/>
            </FrameLayout>
            <TextView android:id="@+id/tvMiniCore7" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="1977" android:textColor="#4CAF50" android:textSize="7sp" android:textStyle="bold" android:layout_marginTop="1dp"/>
        </LinearLayout>
        <TextView android:id="@+id/tvExpand" android:layout_width="16dp" android:layout_height="16dp"
            android:text="▼" android:textColor="#555555" android:textSize="8sp" android:gravity="center" android:layout_marginStart="4dp"/>
    </LinearLayout>

    <!-- 最大化视图 -->
    <LinearLayout
        android:id="@+id/layoutMaximized"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@drawable/floating_bg"
        android:paddingHorizontal="10dp"
        android:paddingTop="8dp"
        android:paddingBottom="10dp"
        android:minWidth="280dp">

        <!-- 标题栏 -->
        <LinearLayout android:id="@+id/layoutHeader" android:layout_width="match_parent" android:layout_height="wrap_content"
            android:orientation="horizontal" android:gravity="center_vertical">
            <View android:id="@+id/viewStatus" android:layout_width="8dp" android:layout_height="8dp" android:background="#4CAF50"/>
            <TextView android:id="@+id/tvTitle" android:layout_width="0dp" android:layout_height="wrap_content" android:layout_weight="1"
                android:text="dfm" android:textColor="#FFFFFF" android:textSize="13sp" android:layout_marginStart="8dp" android:singleLine="true"/>
            <TextView android:id="@+id/tvCpuTotal" android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="0%" android:textColor="#4FC3F7" android:textSize="14sp" android:textStyle="bold"/>
            <TextView android:id="@+id/tvAlpha" android:layout_width="28dp" android:layout_height="28dp"
                android:text="A" android:textColor="#666666" android:textSize="12sp" android:gravity="center" android:layout_marginStart="10dp"/>
            <TextView android:id="@+id/tvMinimize" android:layout_width="28dp" android:layout_height="28dp"
                android:text="—" android:textColor="#666666" android:textSize="14sp" android:gravity="center"/>
            <TextView android:id="@+id/tvClose" android:layout_width="28dp" android:layout_height="28dp"
                android:text="×" android:textColor="#EF5350" android:textSize="16sp" android:gravity="center"/>
        </LinearLayout>

        <!-- CPU柱状图 - 采用最小化样式 -->
        <LinearLayout android:id="@+id/layoutCores" android:layout_width="match_parent" android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_marginTop="10dp" android:gravity="center">

            <!-- CPU 0 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore0" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq0" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="556" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
            <View android:layout_width="4dp" android:layout_height="1dp"/>
            <!-- CPU 1 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore1" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq1" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="556" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
            <View android:layout_width="4dp" android:layout_height="1dp"/>
            <!-- CPU 2 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore2" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq2" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="556" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
            <View android:layout_width="8dp" android:layout_height="1dp"/>
            <!-- CPU 3 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore3" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq3" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="1286" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
            <View android:layout_width="4dp" android:layout_height="1dp"/>
            <!-- CPU 4 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore4" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq4" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="1286" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
            <View android:layout_width="4dp" android:layout_height="1dp"/>
            <!-- CPU 5 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore5" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq5" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="1286" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
            <View android:layout_width="4dp" android:layout_height="1dp"/>
            <!-- CPU 6 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore6" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq6" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="1286" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
            <View android:layout_width="8dp" android:layout_height="1dp"/>
            <!-- CPU 7 -->
            <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:orientation="vertical" android:gravity="center_horizontal">
                <FrameLayout android:layout_width="8dp" android:layout_height="28dp" android:background="#15FFFFFF">
                    <View android:id="@+id/barCore7" android:layout_width="match_parent" android:layout_height="6dp"
                        android:layout_gravity="bottom" android:background="#4CAF50"/>
                </FrameLayout>
                <TextView android:id="@+id/tvFreq7" android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="1977" android:textColor="#4CAF50" android:textSize="8sp" android:textStyle="bold" android:layout_marginTop="2dp"/>
            </LinearLayout>
        </LinearLayout>

        <!-- 线程列表区域 - 左右布局 -->
        <LinearLayout android:id="@+id/layoutThreadsArea" android:layout_width="match_parent" android:layout_height="wrap_content"
            android:orientation="horizontal" android:layout_marginTop="8dp">
            
            <!-- 左侧：APP线程 -->
            <LinearLayout android:id="@+id/layoutThreadsSection" android:layout_width="0dp" android:layout_height="wrap_content"
                android:layout_weight="1" android:orientation="vertical" android:paddingEnd="4dp">
                <TextView android:id="@+id/tvThreadsTitle" android:layout_width="match_parent" android:layout_height="wrap_content"
                    android:text="" android:textColor="#4FC3F7" android:textSize="9sp"/>
                <LinearLayout android:id="@+id/layoutThreads" android:layout_width="match_parent" android:layout_height="wrap_content"
                    android:orientation="vertical" android:layout_marginTop="2dp"/>
            </LinearLayout>
            
            <!-- 分隔线 -->
            <View android:layout_width="1dp" android:layout_height="match_parent" android:background="#333333"/>
            
            <!-- 右侧：系统线程 -->
            <LinearLayout android:id="@+id/layoutSystemThreadsSection" android:layout_width="0dp" android:layout_height="wrap_content"
                android:layout_weight="1" android:orientation="vertical" android:paddingStart="4dp">
                <TextView android:id="@+id/tvSystemThreadsTitle" android:layout_width="match_parent" android:layout_height="wrap_content"
                    android:text="@string/system_threads" android:textColor="#FF9800" android:textSize="9sp"/>
                <LinearLayout android:id="@+id/layoutSystemThreads" android:layout_width="match_parent" android:layout_height="wrap_content"
                    android:orientation="vertical" android:layout_marginTop="2dp"/>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

    <TextView android:id="@+id/tvCpuFreq" android:layout_width="0dp" android:layout_height="0dp" android:visibility="gone"/>
    <TextView android:id="@+id/tvCpuCores" android:layout_width="0dp" android:layout_height="0dp" android:visibility="gone"/>
</LinearLayout>
